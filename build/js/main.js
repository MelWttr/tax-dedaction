function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var modules,installedModules;modules={3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function popup_toggle_closePopup(){popup.classList.remove("popup--active"),body.classList.remove("body-fixed")}function popup_toggle_openPopup(){popup.classList.add("popup--active"),body.classList.add("body-fixed"),document.addEventListener("keydown",documentKeydownHandler),popupOverlay.addEventListener("click",overlayClickHandler),popupCloseBtn.addEventListener("click",closeBtnClickHandler)}var fieldSalary,fieldPrice,priceInvalidMsg,salaryInvalidMsg,calculateBtn,paymentGroup,loader,salaryFieldMask,priceFieldMask,splitNumber,pluralize,loaderToggle,popup=document.querySelector(".popup"),body=document.body,showError=function(errorMessage,message){errorMessage.textContent=message,errorMessage.classList.remove("hidden")},removeError=function(errorMessage){errorMessage.classList.add("hidden")},popupOpen=document.querySelector(".page__button"),popupOverlay=document.querySelector(".popup__overlay"),popupCloseBtn=document.querySelector(".popup__close"),documentKeydownHandler=function documentKeydownHandler(evt){27===evt.keyCode&&(evt.preventDefault(),popup_toggle_closePopup(),document.removeEventListener("keydown",documentKeydownHandler))},closeBtnClickHandler=function(evt){evt.preventDefault(),popup_toggle_closePopup()},overlayClickHandler=function(evt){evt.preventDefault(),popup_toggle_closePopup()};popupOpen&&popup&&popupOpen.addEventListener("click",function(evt){evt.preventDefault(),popup_toggle_openPopup()}),popup&&(fieldSalary=popup.querySelector("#salary-amount"),fieldPrice=popup.querySelector("#flat-price"),priceInvalidMsg=fieldPrice.nextSibling,salaryInvalidMsg=fieldSalary.nextSibling,calculateBtn=popup.querySelector(".popup__calculate-btn"),paymentGroup=popup.querySelector(".popup__payment-group"),loader=popup.querySelector(".popup__loader"),salaryFieldMask=window.iMask(fieldSalary,{mask:"₽ num",blocks:{num:{mask:Number,thousandsSeparator:" "}}}),priceFieldMask=window.iMask(fieldPrice,{mask:"₽ num",blocks:{num:{mask:Number,thousandsSeparator:" "}}}),splitNumber=function(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},pluralize=function(number){var forms=["-ый","-ой","-ий"],numberOne=Math.abs(number)%100,numberTwo=number%10;return 12<=numberOne&&numberOne<=18?number+forms[0]:3==numberTwo?number+forms[2]:0<=numberTwo&&numberTwo<=1||4<=numberTwo&&numberTwo<=5||9<=numberTwo&&numberTwo<=10?number+forms[0]:2==numberTwo||6<=numberTwo&&numberTwo<=8?number+forms[1]:void 0},loaderToggle=function(loader){loader.classList.toggle("popup__loader--visible")},calculateBtn.addEventListener("click",function(){var priceValue=+priceFieldMask.unmaskedValue,salaryValue=+salaryFieldMask.unmaskedValue,isValidationAccepted=!0;if((!priceValue||priceValue<1e5)&&(showError(priceInvalidMsg,priceValue<=0?"Поле обязательно для заполнения":"Минимальное значение 100 000"),isValidationAccepted=!(fieldPrice.style.borderColor="#ea0029")),(!salaryValue||salaryValue<5e3)&&(showError(salaryInvalidMsg,salaryValue<=0?"Поле обязательно для заполнения":"Минимальное значение 5 000"),isValidationAccepted=!(fieldSalary.style.borderColor="#ea0029")),isValidationAccepted){for(var deductionPerYear=Math.round(12*salaryValue*.13),sumToReturn=priceValue<2e6?Math.round(.13*priceValue):26e4,payments=document.createDocumentFragment(),count=0;0<sumToReturn;){count++;var newPayment=document.querySelector("#payment").content.cloneNode(!0),sum=newPayment.querySelector(".check__sum"),year=newPayment.querySelector(".check__year");year.textContent=2===count?"во ".concat(pluralize(count)," год"):"в ".concat(pluralize(count)," год"),sum.textContent="".concat(splitNumber(deductionPerYear<sumToReturn?deductionPerYear:sumToReturn)," рублей "),sum.appendChild(year),payments.appendChild(newPayment),sumToReturn-=deductionPerYear}window.setTimeout(function(){loaderToggle(loader),popup.querySelectorAll(".check").forEach(function(payment){paymentGroup.removeChild(payment)}),paymentGroup.appendChild(payments),paymentGroup.classList.remove("hidden")},2e3),loaderToggle(loader)}}),fieldSalary.addEventListener("focus",function(evt){evt.target.style="",removeError(salaryInvalidMsg)}),fieldPrice.addEventListener("focus",function(evt){evt.target.style="",removeError(priceInvalidMsg)})),function(){var submitButton,form,fields,paymentGroup;popup&&(submitButton=popup.querySelector(".popup__form-submit"),form=popup.querySelector("form"),fields=form.querySelectorAll('.popup__field input[type="text"]'),paymentGroup=form.querySelector(".popup__payment-group"),submitButton.disabled=!0,paymentGroup.addEventListener("click",function(evt){var paymentChecks,isChecked;evt.target.closest(".check__label")&&(paymentChecks=paymentGroup.querySelectorAll('input[name="платеж"]'),submitButton.disabled=(isChecked=!1,paymentChecks.forEach(function(checkbox){checkbox.checked&&(isChecked=!0)}),!isChecked))}),submitButton.addEventListener("click",function(evt){evt.preventDefault(),form.submit(),fields.forEach(function(field){field.value="",field.style=""}),paymentGroup.classList.add("hidden"),popup_toggle_closePopup()}))}()}},installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3);